using System.IO;using Project.EntenEller.Base.Scripts.Advanced.Notifiers;using Project.EntenEller.Base.Scripts.Advanced.Serializations;using Project.EntenEller.Base.Scripts.Cache.Components.Master;using Project.Scripts.HTTP;using UnityEngine;namespace Project.Scripts.SaveLoad{    public class MapSaverOnComputer : EEBehaviour    {        [SerializeField] private MapSaver mapSaver;        public EENotifier SuccessSaveLocal;        protected override void EEAwake()        {            base.EEAwake();            mapSaver.SaveSuccessNotifier.Event += SaveToLocalJson;        }        protected override void EEDestroy()        {            base.EEDestroy();            mapSaver.SaveSuccessNotifier.Event -= SaveToLocalJson;        }        private void SaveToLocalJson()        {            var mapData = mapSaver.Data;            var httpData = ConvertHTTPData.ConvertMapDataInHTTPData(mapData);            var json = EEJSON.Serialize(httpData);                        var filePath = Path.Combine(Application.persistentDataPath, "map_data.json");                try            {                File.WriteAllText(filePath, json);                Debug.Log($"Success save. Path: {filePath}");                                SuccessSaveLocal.Notify();            }            catch (System.Exception e)            {                Debug.LogError($"Fail save: {e.Message}");            }        }    }}